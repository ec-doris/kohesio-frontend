<ux-modal id="mapModal" titleLabel="Map View" [isSizeLarge]="true" [isFooterVisible]="false" (onAnimationEnd)="onMapModalAnimationEnd($event)">
    <uxModalBody>
        <div class="map-container">
            <div class="map-frame">
                <div id="map-inside"></div>
            </div>
        </div>
    </uxModalBody>
</ux-modal>

<div style="display: flex;">
    <ux-layout-page-column mainTitle="Search filters" size="xxxl" [isCollapsible]="true">
        <ux-filter>
            <uxFilterQuickFilter>
            <form [formGroup]="myForm" (ngSubmit)="onSubmit(myForm)">
                <ux-form-group label="Term:" [isVertical]="true">
                    <input class="form-control" type="text" formControlName="term"/>
                </ux-form-group>
                <ux-form-group label="Countries:" [isVertical]="true">
                    <ux-autocomplete-tag formControlName="countries" [items]="countries" [isFreeTagsAllowed]="false" [chipsPosition]="'inside'"></ux-autocomplete-tag>
                </ux-form-group>
                <ux-form-group label="Topics:" [isVertical]="true">
                    <ux-autocomplete-tag formControlName="topics" [items]="topics" [isFreeTagsAllowed]="false" [chipsPosition]="'inside'"></ux-autocomplete-tag>
                </ux-form-group>
                <ux-button iconClass="fa fa-search" type="submit">SEARCH</ux-button>
            </form>
            </uxFilterQuickFilter>
            <uxFilterAdvancedFilter>
            </uxFilterAdvancedFilter>
        </ux-filter>
    </ux-layout-page-column>

    <ux-layout-page-column mainTitle="Projects / Search Results">
        <uxLayoutPageColumnHeaderRightContent *ngIf="this.loadedDataPoints">
            <div class="flex-container">
                <ux-button (click)="uxService.openModal('mapModal')" iconClass="fa fa-globe">Map View</ux-button>
            </div>
        </uxLayoutPageColumnHeaderRightContent>
        <div class="loading" *ngIf="isLoading">Loading...</div>
        <div class="no-results" *ngIf="projects && projects.length === 0 && !isLoading">No results</div>
        <div class="projects-grid" id="projects-grid">
            <a *ngFor="let project of projects" href="{{project.link}}" class="project-link" target="_blank">
                <div class="{{'card ' + project.objectiveId}}">
                    <div class="header">
                        <div class="images">
                            <img *ngIf="project.objectiveId" class="topic" src="{{'assets/images/topics/' + project.objectiveId + '_80.png'}}">
                            <div *ngIf="!project.objectiveId" class="without-obcjetive-id"></div>
                            <img class="flag" src="{{'assets/images/flags/' + project.countryCode.toLowerCase() + '.png'}}">
                        </div>
                        <h1>{{project.title}}</h1>
                    </div>
                    <div class="info-bar">
                        <div class="startDate">
                            <ux-a-date-tag *ngIf="project.startTime" [date]="project.startTime" [isVerticalLayout]="false" [isAgnostic]="true"  dateFormat='MMMM YYYY'></ux-a-date-tag>
                        </div>
                        <div class="budget">{{ project.budget | budget}}</div>
                    </div>
                    <p>{{ project.description }}</p>
                </div>
            </a>
        </div>
    </ux-layout-page-column>
</div>
