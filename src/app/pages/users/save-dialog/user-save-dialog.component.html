<div style="min-width:500px;">
    <kohesio-ecl-message type="error" [message]="errorMessage" *ngIf="errorMessage" (dismissMessage)="errorMessage = undefined"></kohesio-ecl-message>
    <form [formGroup]="myForm">
        <kohesio-ecl-form-group>
            <kohesio-ecl-form-label [required]="true">User ID:</kohesio-ecl-form-label>
            <kohesio-ecl-form-text-input formControlName="userid" [isDisabled]="editMode" [focus]="true"></kohesio-ecl-form-text-input>
        </kohesio-ecl-form-group>
        <kohesio-ecl-form-group>
            <kohesio-ecl-form-label>Role:</kohesio-ecl-form-label>
            <kohesio-ecl-form-select formControlName="role" [items]="this.roles.reverse()" [hasEmptyValue]="false"></kohesio-ecl-form-select>
        </kohesio-ecl-form-group>
        <kohesio-ecl-form-group>
            <kohesio-ecl-form-label>Expiration Date:</kohesio-ecl-form-label>
            <mat-form-field style="margin-top:0px;width:100%;">
                <input formControlName="expiration" matInput [matDatepicker]="picker">
                <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
        </kohesio-ecl-form-group>
        <kohesio-ecl-form-group>
            <kohesio-ecl-form-checkbox formControlName="active" label="Active"></kohesio-ecl-form-checkbox>
        </kohesio-ecl-form-group>
        <article class="ecl-card" *ngIf="myForm && (myForm.value['role'] == 'EDITOR' || myForm.value['role'] == 'REVIEWER')">
            <div class="ecl-card__body">
                <div class="ecl-content-block ecl-card__content-block" style="max-width: 450px;">
                    <h2 class="ecl-content-block__title">Allowed CCIs:</h2>
                    <kohesio-ecl-form-group>
                        <kohesio-ecl-form-label>Country:</kohesio-ecl-form-label>
                        <kohesio-ecl-form-select formControlName="country" [items]="this.countries" (change)="onCountrySelection($event)"></kohesio-ecl-form-select>
                    </kohesio-ecl-form-group>
                    <kohesio-ecl-form-group>
                        <kohesio-ecl-form-label>CCI:</kohesio-ecl-form-label>
                        <kohesio-ecl-form-select formControlName="cci" [items]="this.ccis" [isDisabled]="myForm && !myForm.value['country']"
                                                 placeholder="Select a country"></kohesio-ecl-form-select>
                    </kohesio-ecl-form-group>
                    <kohesio-ecl-button style="float:right;margin-top:5px;" type="button" variant="secondary" (click)="addCCI()">Add</kohesio-ecl-button>
                    <ng-container class="ccis-list" *ngFor="let cci_list_item of ccis_list">
                        <button type="button" (click)="onClickCci(cci_list_item.cci)" aria-label="Dismiss" class="ecl-tag ecl-tag--removable">
                            <span class="ecl-tag__icon">
                                <svg class="ecl-icon ecl-icon--xs ecl-tag__icon-close" focusable="false" aria-hidden="true">
                                    <use xlink:href="assets/images/ecl/icons.a892a63d.svg#close"></use>
                                </svg>
                                <svg class="ecl-icon ecl-icon--xs ecl-tag__icon-close-filled" focusable="false" aria-hidden="true">
                                    <use xlink:href="assets/images/ecl/icons.a892a63d.svg#close-filled"></use>
                                </svg>
                            </span>
                            <span class="ecl-tag__text">{{cci_list_item.label}}</span>
                        </button>
                    </ng-container>
                </div>
            </div>
        </article>
    </form>
</div>
