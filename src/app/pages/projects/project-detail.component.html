<!-- <ux-modal id="imageOverlay" [titleLabel]="project?.label" [isFooterVisible]="false" customWidth="500px">
    <uxModalBody>
        <div class="modal-body">
            <img [src]="project?.images[0].image" alt="" *ngIf="project?.images && project?.images.length">
            <div class="title" *ngIf="project?.images && project?.images.length">{{project?.images[0].imageCopyright}}</div>
        </div>
    </uxModalBody>
</ux-modal> -->

<nav *ngIf="!isModal" class="ecl-breadcrumb-harmonised ecl-page-header-harmonised__breadcrumb" aria-label="You&#x20;are&#x20;here&#x3A;"
    data-ecl-breadcrumb-harmonised="true" data-ecl-auto-init="BreadcrumbHarmonised">
    <ol class="ecl-breadcrumb-harmonised__container">
        <li class="ecl-breadcrumb-harmonised__segment" data-ecl-breadcrumb-harmonised-item="expandable">
            <a [routerLink]="['/']"
                class="ecl-link ecl-link--standalone ecl-link--no-visited ecl-breadcrumb-harmonised__link">Home</a>
            <span style="margin-right:10px; margin-left:10px; font-weight: bold;">></span>
        </li>
        <li class="ecl-breadcrumb-harmonised__segment" data-ecl-breadcrumb-harmonised-item="expandable">
            <a [routerLink]="['/projects']"
                class="ecl-link ecl-link--standalone ecl-link--no-visited ecl-breadcrumb-harmonised__link">Projects</a>
            <span style="margin-right:10px; margin-left:10px; font-weight: bold;">></span>
        </li>
        <li class="ecl-breadcrumb-harmonised__segment" data-ecl-breadcrumb-harmonised-item="expandable">
            <span
                class="ecl-link ecl-link--standalone ecl-link--no-visited ecl-breadcrumb-harmonised__link">Project Details</span>
        </li>
    </ol>
</nav>

<div class="kohesio-page-detail" [ngClass]="isModal == true ? 'modal' : 'no-modal'">
    <div class="kohesio-page-detail-tools">
        <kohesio-ecl-button *ngIf="isModal" variant="secondary" (click)="openNewTab()">New tab</kohesio-ecl-button>&nbsp;
        <kohesio-ecl-button variant="secondary" (click)="openGraph($event)">Graph</kohesio-ecl-button>&nbsp;
        <kohesio-ecl-button variant="secondary" (click)="openWiki($event)">More</kohesio-ecl-button>
    </div>
    <div class="kohesio-page-detail-container">
        <div class="kohesio-side-content">
            <div class="kohesio-side-content-block">
                <span class="title">project info</span>
                <div class="content">
                    <span>Start date: </span>
                    <span>
                        <ng-container *ngIf="project?.startTime">
                            {{project.startTime | date:'d MMMM yyyy'}}
                        </ng-container>
                        <ng-container *ngIf="!project?.startTime">n/a</ng-container>
                    </span>
                </div>
                <div class="content">
                    <span>End date: </span>
                    <span>
                        <ng-container *ngIf="project?.endTime">
                            {{project.endTime | date:'d MMMM yyyy'}}
                        </ng-container>
                        <ng-container *ngIf="!project?.endTime">n/a</ng-container>
                    </span>
                </div>

                <div class="content">
                    <span>Managing authority: </span>
                    {{project?.managingAuthorityLabel ? project?.managingAuthorityLabel : "n/a"}}
                </div>

                <div class="content" *ngIf="project?.projectWebsite">
                    <span>Project website: </span>
                    <a class="ecl-link ecl-link--standalone" [href]="project?.projectWebsite" *ngIf="project?.projectWebsite" target="_blank">link</a>
                    <ng-container *ngIf="!project?.projectWebsite">n/a</ng-container>
                </div>
                <div class="content" *ngIf="project?.programWebsite">
                    <span>Programme website: </span>
                    <a class="ecl-link ecl-link--standalone" [href]="project?.programWebsite" *ngIf="project?.programWebsite" target="_blank">link</a>
                    <ng-container *ngIf="!project?.programWebsite">n/a</ng-container>
                </div>
                <div class="content" *ngIf="project?.infoRegioUrl" style="margin-top: 10px;">
                    <a class="ecl-link ecl-link--standalone" [href]="project?.infoRegioUrl" *ngIf="project?.infoRegioUrl" target="_blank">Read further about the project</a>
                    <ng-container *ngIf="!project?.infoRegioUrl">n/a</ng-container>
                </div>
            </div>

            
            <div class="kohesio-side-content-block">
                <span class="title">funding</span>
                <div class="content">
                    <span>Fund: </span>
                    <span>{{project?.fundLabel}}</span>
                    <span *ngIf="!project?.fundLabel">n/a</span>
                </div>

                <div class="content">
                    <span>Programming period: </span>
                    <span>{{project?.programmingPeriodLabel}}</span>
                </div>
                <div class="content">
                    <span>Programme: </span>
                    <span><a class="ecl-link ecl-link--standalone" [href]="project?.programInfoRegioUrl" target="_blank">{{project?.programLabel ? project?.programLabel : 'n/a'}}</a></span>
                </div>

                <div class="content">
                    <span>Total budget: </span>
                    <span>{{project?.budget | currency:'EUR':'symbol':'1.2-2':'fr'}}</span>
                    <span *ngIf="!project?.budget">n/a</span>
                </div>

                <div class="content">
                    <span>EU contribution: </span>
                    <span *ngIf="!project?.euBudget">n/a</span>
                    <span *ngIf="project?.euBudget">
                        {{project?.euBudget | currency:'EUR':'symbol':'1.2-2':'fr'}}
                        <ng-container *ngIf="project?.cofinancingRate">
                            ({{project?.cofinancingRate | number:'1.0-3':'fr'}}%)
                        </ng-container>
                    </span>
                </div>
            </div>

            
            <div class="kohesio-side-content-block">
                <span class="title" *ngIf="project.objectiveLabels.length <= 1">theme</span>
                <span class="title" *ngIf="project.objectiveLabels.length > 1">themes</span>
                <div class="content  padding" *ngFor="let item of project?.objectiveLabels">
                    <span class="no-bold">{{item}}</span>
                </div>
                <div class="content" *ngIf="project.objectiveLabels.length == 0">
                    <span class="no-bold" >n/a</span>
                </div>
            </div>

            
            <div class="kohesio-side-content-block">
                <span class="title" *ngIf="project.categoryLabels.length <= 1">intervention field</span>
                <span class="title" *ngIf="project.categoryLabels.length > 1">intervention fields</span>
                <div class="content padding" *ngFor="let item of project?.categoryLabels">
                    <span class="no-bold">{{item}}</span>
                </div>
                <div class="content" *ngIf="project.categoryLabels.length == 0">
                    <span class="no-bold" >n/a</span>
                </div>
            </div>

            
            <div class="kohesio-side-content-block" >
                <span class="title" *ngIf="project.beneficiaries.length <= 1">beneficiary</span>
                <span class="title" *ngIf="project.beneficiaries.length > 1">beneficiaries</span>
                <div class="content" *ngFor="let beneficiary of project?.beneficiaries | sort: 'beneficiaryLabel'">
                    <span class="no-bold" *ngIf="!beneficiary?.link">{{beneficiary.beneficiaryLabel}}</span>
                    <a class="ecl-link ecl-link--standalone" *ngIf="beneficiary?.link" [target]="isModal ? '_blank': '_self'" [routerLink]="['/beneficiaries/' + beneficiary.link.replace(entityURL, '')]">
                        {{beneficiary.beneficiaryLabel}}
                    </a>
                    <span *ngIf="beneficiary.transliteration" class="muted-text"> ({{beneficiary.transliteration}})</span>
                </div>
                <div class="content" *ngIf="project.beneficiaries.length == 0">
                    <span class="no-bold" >n/a</span>
                </div>
            </div>
        </div>
        <div class="kohesio-main-content">
            <div class="kohesio-article-wrapper">
                <article class="kohesio-article-post">
                    <div class="project-theme-image">
                        <ng-container *ngIf="project?.images && project.images.length">
                            <img [src]="project.images[0].image" >
                        </ng-container>
                        <ng-container>
                            <div class="default-theme-image" *ngIf="!project?.images || !project.images.length">
                                <img *ngIf="project?.objectiveIds" class="topic" [src]="'assets/images/topics/' + (project.objectiveIds[0] || 'question_mark') + '.png'">
                            </div>
                        </ng-container>
                        <footer *ngIf="project?.images && project.images.length">{{project.images[0].imageCopyright}}</footer>
                    </div>
                    <div class="kohesio-article-post-inner">
                        <div class="kohesio-article-post-inner-header">
                            <div class="project-theme-image-mobile">
                                <ng-container *ngIf="project?.images && project.images.length">
                                    <img [src]="project.images[0].image" >
                                </ng-container>
                                <ng-container>
                                    <div class="default-theme-image" *ngIf="!project?.images || !project.images.length">
                                        <img *ngIf="project?.objectiveIds" class="topic" [src]="'assets/images/topics/' + (project.objectiveIds[0] || 'question_mark') + '.png'">
                                    </div>
                                </ng-container>
                                <footer *ngIf="project?.images && project.images.length">{{project.images[0].imageCopyright}}</footer>
                            </div>
                            <!-- <ux-popover #highlightedPopover [showCloseIcon]="false" size="small" [hasNoContentPadding]="false">
                                <b>Highlighted project</b>
                            </ux-popover> -->
                            <h1 class="ecl-u-type-heading-4">
                                {{project?.label}} <span *ngIf="project?.infoRegioUrl" style="color: #203F79;">★</span>
                            </h1>
                        </div>
                        <div class="kohesio-article-post-content">
                                <p class="ecl-u-type-paragraph">{{project?.description}}</p>
                        </div>
                        <div class="kohesio-social-icons-wrapper">
                            <span class="title">share on </span>
                            <ul class="ecl-social-media-follow__list">
                                <li class="ecl-social-media-follow__item">
                                    <a [href]="'https://www.facebook.com/sharer/sharer.php?u=' + currentUrl" target="_blank" class="ecl-link ecl-link--standalone ecl-link--icon ecl-link--icon-before ecl-social-media-follow__link">
                                        <svg class="ecl-icon ecl-icon--xl ecl-link__icon ecl-social-media-follow__icon" focusable="false" aria-hidden="true">
                                            <use xlink:href="/assets/images/ecl/icons-social.d5f51eae.svg#facebook"></use>
                                        </svg>
                                        <svg class="ecl-icon ecl-icon--xl ecl-link__icon ecl-social-media-follow__icon-hover" focusable="false" aria-hidden="true">
                                            <use xlink:href="/assets/images/ecl/icons-social.d5f51eae.svg#facebook_hover"></use>
                                        </svg>
                                    </a>
                                </li>
                                <li class="ecl-social-media-follow__item">
                                    <a [href]="'https://twitter.com/intent/tweet?url=' + currentUrl" target="_blank" class="ecl-link ecl-link--standalone ecl-link--icon ecl-link--icon-before ecl-social-media-follow__link">
                                        <svg class="ecl-icon ecl-icon--xl ecl-link__icon ecl-social-media-follow__icon" focusable="false" aria-hidden="true">
                                            <use xlink:href="/assets/images/ecl/icons-social.d5f51eae.svg#twitter"></use>
                                        </svg>
                                        <svg class="ecl-icon ecl-icon--xl ecl-link__icon ecl-social-media-follow__icon-hover" focusable="false" aria-hidden="true">
                                            <use xlink:href="/assets/images/ecl/icons-social.d5f51eae.svg#twitter_hover"></use>
                                        </svg>
                                    </a>
                                </li>
                                <!--<li class="ecl-social-media-follow__item">
                                    <a href="https://instagram.com/" target="_blank" class="ecl-link ecl-link--standalone ecl-link--icon ecl-link--icon-before ecl-social-media-follow__link">
                                        <svg class="ecl-icon ecl-icon--xl ecl-link__icon ecl-social-media-follow__icon" focusable="false" aria-hidden="true">
                                            <use xlink:href="/assets/images/ecl/icons-social.d5f51eae.svg#instagram"></use>
                                        </svg>
                                        <svg class="ecl-icon ecl-icon--xl ecl-link__icon ecl-social-media-follow__icon-hover" focusable="false" aria-hidden="true">
                                            <use xlink:href="/assets/images/ecl/icons-social.d5f51eae.svg#instagram_hover"></use>
                                        </svg>
                                    </a>
                                </li>-->
                                <li class="ecl-social-media-follow__item">
                                    <a [href]="'https://www.linkedin.com/sharing/share-offsite/?url='+ currentUrl" target="_blank" class="ecl-link ecl-link--standalone ecl-link--icon ecl-link--icon-before ecl-social-media-follow__link">
                                        <svg class="ecl-icon ecl-icon--xl ecl-link__icon ecl-social-media-follow__icon" focusable="false" aria-hidden="true">
                                            <use xlink:href="/assets/images/ecl/icons-social.d5f51eae.svg#linkedin"></use>
                                        </svg>
                                        <svg class="ecl-icon ecl-icon--xl ecl-link__icon ecl-social-media-follow__icon-hover" focusable="false" aria-hidden="true">
                                            <use xlink:href="/assets/images/ecl/icons-social.d5f51eae.svg#linkedin_hover"></use>
                                        </svg>
                                    </a>
                                </li>
                                <li class="ecl-social-media-follow__item">
                                    <a [href]="'mailto:?subject=Kohesio&body=Check this project on Kohesio: ' + currentUrl" target="_blank" class="ecl-link ecl-link--standalone ecl-link--icon ecl-link--icon-before ecl-social-media-follow__link">
                                        <svg class="ecl-icon ecl-icon--xl ecl-link__icon ecl-social-media-follow__icon" focusable="false" aria-hidden="true">
                                            <use xlink:href="/assets/images/ecl/icons-social.d5f51eae.svg#email"></use>
                                        </svg>
                                        <svg class="ecl-icon ecl-icon--xl ecl-link__icon ecl-social-media-follow__icon-hover" focusable="false" aria-hidden="true">
                                            <use xlink:href="/assets/images/ecl/icons-social.d5f51eae.svg#email_hover"></use>
                                        </svg>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </article>
            </div>
            <div class="kohesio-map-wrapper" *ngIf="project?.coordinates">
                <h2 class="title ecl-u-type-heading-5">
                    <img class="flag" src="{{'assets/images/flags/' + project.countryCode.toLowerCase() + '.png'}}">
                    In
                    <ng-container *ngIf="project?.regionText">
                        {{project?.regionText}}
                    </ng-container>
                    <ng-container *ngIf="!project?.regionText">[THE REGION]</ng-container>
                </h2>
                <app-map mapId="map-details" [hideNavigation]="true"></app-map>
            </div>
        </div>
    </div>
</div>
